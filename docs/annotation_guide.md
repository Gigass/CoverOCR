# 教材封面字体标注指南

## 一、标注目标

为每张教材封面图片中的**主要文字区域**标注以下信息：
1. **文字内容**（OCR 识别的文本）
2. **字体类别**（宋体、黑体、楷体、仿宋、Arial 等）
3. **字号名称**（小四、四号、三号、小三、二号、小二、一号、小一、初号、小初等）
4. **磅值**（Point Size，如 12pt、14pt、22pt 等）
5. **边界框坐标**（Bounding Box，用于训练）

## 二、标注流程

### 步骤 1：准备工作

1. **收集图片**：
   - 拍摄或收集 100-200 张教材封面照片
   - 确保图片清晰，光线充足
   - 尽量保持书本平整，减少透视变形
   - 建议分辨率：宽度 1500px 以上

2. **创建标注文件夹**：
   ```
   data/
   ├── images/           # 原始图片
   ├── annotations/      # 标注文件（JSON）
   └── crops/           # 文字区域裁剪图（可选）
   ```

### 步骤 2：使用 OCR 获取初步结果

运行 CoverOCR 系统，获取 OCR 识别结果（文字内容 + 边界框）。这样可以节省手动框选的时间。

### 步骤 3：人工标注字体和字号

对于每个文字区域，您需要：

#### 3.1 确定字体类别

**方法 1：查看原书实物**（最准确）
- 如果您手头有实体书，直接查看封面设计说明或版权页
- 部分教材会在版权页注明封面使用的字体

**方法 2：视觉识别**（需要一定经验）
- **宋体**：笔画有粗细变化，横细竖粗，有明显的"三角"装饰
- **黑体**：笔画粗细均匀，无装饰，方正有力
- **楷体**：类似手写体，笔画有顿挫感
- **仿宋**：介于宋体和楷体之间，笔画较细
- **Arial/Times New Roman**：英文字体，根据有无衬线区分

**方法 3：使用字体识别工具**
- 在线工具：[WhatTheFont](https://www.myfonts.com/WhatTheFont/)
- 上传文字区域的截图，工具会推荐相似字体

#### 3.2 确定字号（磅值）

**方法 1：测量法**（推荐，最准确）

1. **准备工具**：
   - 一把尺子（毫米刻度）
   - 或使用手机 App（如"AR 尺子"）

2. **测量步骤**：
   ```
   a. 测量书本实际宽度（如 18.5cm，标准 16 开）
   b. 测量照片中书本的像素宽度（如 800px）
   c. 计算 DPI：800px / (18.5cm / 2.54) = 109.9 DPI
   d. 测量文字高度（像素）：如 50px
   e. 计算磅值：50px * (72 / 109.9) = 32.7pt
   f. 四舍五入到 0.5：32.5pt 或 33pt
   ```

3. **对应字号名称**：
   - 32.5pt → 查表 → 接近"小二"（18pt）或"二号"（22pt）
   - 如果不在标准字号范围内，标注为"自定义"

**方法 2：对比法**（适合批量标注）

1. 打印一张**字号对照表**（见下方附录）
2. 将实体书与对照表并排放置
3. 目测对比，找到最接近的字号

**方法 3：软件辅助法**

1. 在 Photoshop/Illustrator 中打开照片
2. 用文字工具输入相同文字
3. 调整字号直到与照片中的文字大小一致
4. 记录字号

#### 3.3 标注边界框

如果 OCR 结果不准确，需要手动调整：
- 使用标注工具（如 LabelImg、CVAT）框选文字区域
- 记录坐标：`[x_min, y_min, x_max, y_max]`

### 步骤 4：填写标注文件

为每张图片创建一个 JSON 文件，格式如下：

```json
{
  "image_path": "images/book_001.jpg",
  "image_width": 1920,
  "image_height": 2560,
  "book_size": "16k",
  "book_width_cm": 18.5,
  "annotations": [
    {
      "text": "人工智能与机器学习",
      "bbox": [120, 450, 680, 550],
      "font_family": "黑体",
      "font_size_name": "初号",
      "point_size": 42,
      "confidence": "high"
    },
    {
      "text": "张静 编著",
      "bbox": [150, 600, 400, 650],
      "font_family": "宋体",
      "font_size_name": "小四",
      "point_size": 12,
      "confidence": "medium"
    }
  ]
}
```

**字段说明**：
- `confidence`：标注置信度（high/medium/low），表示您对这个标注的确定程度
- `bbox`：边界框坐标 `[x_min, y_min, x_max, y_max]`

## 三、标注工具推荐

### 选项 1：使用我为您创建的简易标注工具

我会创建一个网页版标注工具，您可以：
1. 上传图片
2. 查看 OCR 预标注结果
3. 点击每个文字区域，修改字体和字号
4. 导出 JSON 文件

### 选项 2：使用 Excel 表格

如果您更习惯表格：
1. 运行 OCR 获取结果
2. 导出为 CSV
3. 在 Excel 中添加"字体"和"磅值"列
4. 逐行填写

### 选项 3：使用专业标注工具

- **CVAT**：支持图像标注，可自定义属性
- **Label Studio**：更现代化的界面

## 四、质量控制

### 标注一致性检查

1. **字体一致性**：
   - 同一本书的标题通常使用相同字体
   - 作者名、出版社等辅助信息通常使用另一种字体

2. **字号合理性**：
   - 标题字号 > 副标题 > 作者名 > 出版社
   - 常见范围：标题 26-42pt，正文 10-14pt

3. **交叉验证**：
   - 每 10 张图片，抽查 2 张让另一个人复核
   - 对比两人的标注结果，差异 > 2pt 的需要重新确认

## 五、附录

### 标准字号对照表

| 字号名称 | 磅值 (pt) | 毫米 (mm) | 常见用途 |
|---------|----------|----------|---------|
| 八号 | 5 | 1.76 | 脚注 |
| 七号 | 5.5 | 1.94 | 脚注 |
| 小六 | 6.5 | 2.29 | 页码 |
| 六号 | 7.5 | 2.65 | 页码 |
| 小五 | 9 | 3.18 | 正文 |
| 五号 | 10.5 | 3.70 | 正文 |
| 小四 | 12 | 4.23 | 正文 |
| 四号 | 14 | 4.94 | 小标题 |
| 小三 | 15 | 5.29 | 小标题 |
| 三号 | 16 | 5.64 | 标题 |
| 小二 | 18 | 6.35 | 标题 |
| 二号 | 22 | 7.76 | 大标题 |
| 小一 | 24 | 8.47 | 大标题 |
| 一号 | 26 | 9.17 | 主标题 |
| 小初 | 36 | 12.70 | 封面标题 |
| 初号 | 42 | 14.82 | 封面标题 |

### 常见字体示例

- **宋体**：方正书宋、中易宋体、思源宋体
- **黑体**：方正黑体、中易黑体、思源黑体
- **楷体**：方正楷体、中易楷体、霞鹜文楷
- **仿宋**：方正仿宋、中易仿宋

## 六、标注进度跟踪

建议创建一个进度表：

| 图片编号 | 文件名 | 标注人 | 标注日期 | 文字区域数 | 状态 | 备注 |
|---------|-------|-------|---------|-----------|------|------|
| 001 | book_001.jpg | 张三 | 2024-01-15 | 5 | 已完成 | - |
| 002 | book_002.jpg | 李四 | 2024-01-15 | 3 | 待复核 | 字体不确定 |

## 七、常见问题

**Q1：如何处理艺术字体？**
A：标注为"自定义"，并在备注中说明（如"加粗黑体"、"斜体宋体"）

**Q2：英文字体如何标注？**
A：常见的有 Arial、Times New Roman、Helvetica 等，如果不确定，标注为"Sans-serif"或"Serif"

**Q3：字号测量误差多大可以接受？**
A：±1pt 以内可以接受，±2pt 需要重新测量

**Q4：一个文字区域有多种字体怎么办？**
A：拆分为多个区域分别标注

---

**预计工作量**：
- 每张图片平均 5 个文字区域
- 每个区域标注时间：2-3 分钟
- 100 张图片总耗时：约 20-25 小时

**建议分批进行**：
- 第一批：20 张（验证标注流程）
- 第二批：30 张（训练初步模型）
- 第三批：50 张（优化模型）
